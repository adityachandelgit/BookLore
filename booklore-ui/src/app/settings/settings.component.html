@if (userService.userState$ | async; as userData) {
  <div>
    <div class="rounded-xl overflow-hidden">
      <p-tabs [(value)]="activeTab" scrollable>
        <p-tablist>
          <p-tab [value]="SettingsTab.ReaderSettings">Reader Preferences</p-tab>
          <p-tab [value]="SettingsTab.ViewPreferences">View Preferences</p-tab>
          @if (userData.permissions.admin) {
            <p-tab [value]="SettingsTab.MetadataSettings">Metadata Settings</p-tab>
            <p-tab [value]="SettingsTab.ApplicationSettings">Application Settings</p-tab>
            <p-tab [value]="SettingsTab.UserManagement">User Management</p-tab>
            <p-tab [value]="SettingsTab.EmailSettings">Email Settings</p-tab>
            <p-tab [value]="SettingsTab.AuthenticationSettings">Authentication</p-tab>
          }
        </p-tablist>
        <p-tabpanels>
          <p-tabpanel [value]="SettingsTab.ReaderSettings">
            <app-reader-preferences></app-reader-preferences>
          </p-tabpanel>
          <p-tabpanel [value]="SettingsTab.ViewPreferences">
            <app-view-preferences-parent></app-view-preferences-parent>
          </p-tabpanel>
          @if (userData.permissions.admin) {
            <p-tabpanel [value]="SettingsTab.MetadataSettings">
              <app-metadata-settings-component></app-metadata-settings-component>
            </p-tabpanel>
            <p-tabpanel [value]="SettingsTab.ApplicationSettings">
              <app-global-preferences></app-global-preferences>
            </p-tabpanel>
            <p-tabpanel [value]="SettingsTab.UserManagement">
              <app-user-management></app-user-management>
            </p-tabpanel>
            <p-tabpanel [value]="SettingsTab.EmailSettings">
              <app-email></app-email>
            </p-tabpanel>
            <p-tabpanel [value]="SettingsTab.AuthenticationSettings">
              <app-authentication-settings></app-authentication-settings>
            </p-tabpanel>
          }
        </p-tabpanels>
      </p-tabs>
    </div>
  </div>
}
