<div class="card mx-auto max-w-2xl" *ngIf="currentUser">
  <div class="p-6 space-y-8">

    <!-- Profile Info -->
    <section class="space-y-6">
      <div class="flex justify-between items-center">
        <h2 class="text-2xl font-semibold">Profile Information</h2>
        <div class="flex gap-2">
          <p-button *ngIf="!isEditing" label="Edit Profile" icon="pi pi-pencil" (onClick)="toggleEdit()" styleClass="p-button-sm p-button-secondary"></p-button>
          <div *ngIf="isEditing" class="flex gap-2">
            <p-button label="Cancel" icon="pi pi-times" (onClick)="toggleEdit()" styleClass="p-button-sm p-button-secondary"></p-button>
            <p-button label="Save" icon="pi pi-check" (onClick)="saveChanges()" styleClass="p-button-sm p-button-success"></p-button>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium mb-1">Username</label>
          <p *ngIf="!isEditing" class="text-lg">{{ currentUser.username }}</p>
          <input *ngIf="isEditing" id="username" type="text" pInputText [(ngModel)]="currentUser.username" class="w-full" disabled />
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Full Name</label>
          <p *ngIf="!isEditing" class="text-lg">{{ currentUser.name }}</p>
          <input *ngIf="isEditing" id="fullname" type="text" pInputText [(ngModel)]="editUserData.name" class="w-full" />
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm font-medium mb-1">Email</label>
          <p *ngIf="!isEditing" class="text-lg">{{ currentUser.email }}</p>
          <input *ngIf="isEditing" id="email" type="email" pInputText [(ngModel)]="editUserData.email" class="w-full" />
        </div>
      </div>
    </section>

    <p-divider></p-divider>

    <!-- Change Password -->
    <section class="space-y-6">
      <h2 class="text-2xl font-semibold">Change Password</h2>
      <form #changePasswordForm="ngForm" (ngSubmit)="submitPasswordChange()" class="space-y-4">
        <div>
          <label class="block text-sm font-medium mb-1" for="currentPassword">Current Password</label>
          <p-password id="currentPassword" [(ngModel)]="currentPassword" name="currentPassword" [feedback]="false" class="w-full" />
        </div>
        <div>
          <label class="block text-sm font-medium mb-1" for="newPassword">New Password</label>
          <p-password id="newPassword" [(ngModel)]="newPassword" name="newPassword" [feedback]="false" class="w-full" />
        </div>
        <div>
          <label class="block text-sm font-medium mb-1" for="confirmNewPassword">Confirm New Password</label>
          <p-password id="confirmNewPassword" [(ngModel)]="confirmNewPassword" name="confirmNewPassword" [feedback]="false" class="w-full" />
        </div>
        <div class="flex justify-end">
          <p-button type="submit" label="Change Password" icon="pi pi-key" class="p-button-sm p-button-primary" />
        </div>
      </form>
    </section>

  </div>
</div>

<div *ngIf="!currentUser" class="flex items-center justify-center min-h-[50vh] text-lg">
  Loading user data...
</div>
